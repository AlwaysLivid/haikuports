SUMMARY="A free word processing program similar to Microsoft® Word"
DESCRIPTION="AbiWord is a free word processing program similar to Microsoft® \
Word. It is suitable for a wide variety of word processing tasks.

AbiWord allows you to collaborate with multiple people on one document at the \
same time. It is tightly integrated with the AbiCollab.net web service, which \
lets you store documents online, allows easy document sharing with your \
friends, and performs format conversions on the fly."
HOMEPAGE="https://www.abisource.com/"
COPYRIGHT="1998-2012 Dom Lachowicz and other contributors"
LICENSE="GNU GPL v2"
REVISION="1"
SOURCE_URI="https://abisource.com/downloads/abiword/$portVersion/source/abiword-$portVersion.tar.gz"
CHECKSUM_SHA256="e93096cb192e5bc19d62e180fc5eda643206465315a710113ae5036bc2a1a5d7"

ARCHITECTURES="?x86_gcc2 x86_64"

PROVIDES="
	abiword = $portVersion
	app:AbiWord
	"
REQUIRES="
	haiku
	lib:libexpat
	lib:libfribidi
	lib:libiconv
	lib:libjpeg
	lib:libpng16
	lib:libpopt
	lib:libpsiconv
	lib:libxml2
	lib:libz
	"

BUILD_REQUIRES="
	haiku_devel
	devel:libboost_system
	devel:libexpat
	devel:libfribidi
	devel:libiconv
	devel:libjpeg
	devel:libpng16
	devel:libpopt
	devel:libpsiconv
	devel:libxml2
	devel:libz
	"
BUILD_PREREQUIRES="
	cmd:aclocal
	cmd:autoconf
	cmd:automake
	cmd:cmp
	cmd:gcc
	cmd:ld
	cmd:make
	cmd:pkg_config
	"

BUILD()
{
	automake
	runConfigure ./configure
	# AbiWord doesn't build with multiple jobs specified
	make $jobargs
}

INSTALL()
{
	mkdir $appsDir
	cp abi/src/*/bin/* $appsDir
	addAppDeskbarSymlink $appsDir/AbiWord
}

TEST()
{
	make test
}
